#!/bin/bash

# ุณูุฑูุจุช ุจูุงุก Flutter Web ูู Vercel
echo "๐ ุจุฏุก ุจูุงุก ูุดุฑูุน ุฏูุฏู ุงูุฅุฏุงุฑู..."

# ุงูุชุญูู ูู ูุฌูุฏ Flutter
if ! command -v flutter &> /dev/null; then
    echo "โ Flutter ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Flutter ุฃููุงู."
    exit 1
fi

# ุงูุชุญูู ูู ุฅุตุฏุงุฑ Flutter
echo "๐ฑ ุฅุตุฏุงุฑ Flutter:"
flutter --version

# ุชูุธูู ุงููุดุฑูุน
echo "๐งน ุชูุธูู ุงููุดุฑูุน..."
flutter clean

# ุงูุญุตูู ุนูู ุงูุชุจุนูุงุช
echo "๐ฆ ุงูุญุตูู ุนูู ุงูุชุจุนูุงุช..."
flutter pub get

# ุจูุงุก ุงููุดุฑูุน ููุฅูุชุงุฌ
echo "๐จ ุจูุงุก ุงููุดุฑูุน ููุฅูุชุงุฌ..."
flutter build web --release --web-renderer html

# ุงูุชุญูู ูู ูุฌุงุญ ุงูุจูุงุก
if [ -d "build/web" ]; then
    echo "โ ุชู ุจูุงุก ุงููุดุฑูุน ุจูุฌุงุญ!"
    echo "๐ ูุฌูุฏ ุงูุจูุงุก: build/web"
    ls -la build/web/
else
    echo "โ ูุดู ูู ุจูุงุก ุงููุดุฑูุน!"
    exit 1
fi

echo "๐ ุงูุชูู ุงูุจูุงุก ุจูุฌุงุญ!"